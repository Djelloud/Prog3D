<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Drapeau de l'Angleterre par Mohamed-Amine Djelloud</title>
  <link rel="stylesheet" type="text/css" href="StyleLabo4.css" />   
 
 
  <!-- Code JavaScript local -->
  <script type="text/javascript">
   var objCanvas = null;
    var objC2D = null;  
    var objImage =  new Image();
    let intXSouris = null;
	let intYSouris = null;
    let intXTexte = null;
	let intYTexte = null;
    let binCercleGlisse = false;

    function initDessiner(){
         objCanvas = document.getElementById('monCanvas');
         objC2D = objCanvas.getContext('2d');  
         intXTexte = objCanvas.width / 2;
        intYTexte = objCanvas.height / 2;
        binCercleGlisse = false; // Le cercle ne glisse pas
		dessiner(); // Dessiner une première fois
    }


    function effacerDessin() {
                        objC2D.clearRect(0, 0, objCanvas.width, objCanvas.height);
                    }

function prendreTexte() {

                            var objElemRect = event.target.getBoundingClientRect();
                            intXSouris = event.clientX - objElemRect.left;
                            intYSouris = event.clientY - objElemRect.top;
                            
                    if (objC2D.isPointInPath(intXSouris, intYSouris)) {
                       
                        event.preventDefault();
                        
                    }
                    else {
                       
                        effacerDessin(); binCercleGlisse = true; dessiner();
                        objImage.src = objCanvas.toDataURL();
                        event.dataTransfer.setDragImage(objImage, intXTexte, intYTexte);
                    }
			}

            function glisserTexte() {
                event.preventDefault(); // Permettre le dépôt

// Calculer la distance (x,y) entre l'ancienne 
// postion de la souris et la nouvelle
const objElemRect = event.target.getBoundingClientRect();
const intXSouris2 = event.clientX - objElemRect.left;
const intYSouris2 = event.clientY - objElemRect.top;
// La distance entre l'ancienne position de la souris
// et sa position actuelle
const intDistanceX = intXSouris2 - intXSouris;
const intDistanceY = intYSouris2 - intYSouris;

    	// La nouvelle position du cercle
        intXTexte += intDistanceX; 
        intYTexte += intDistanceY; 
            // Redesssiner (avec ombrage)
        effacerDessin();  dessiner();
        intXSouris = intXSouris2;  intYSouris = intYSouris2;
    
			}

            function deposerTexte() {
                var objElemRect = event.target.getBoundingClientRect();
                intXTexte = event.clientX - objElemRect.left;
                intYTexte = event.clientY - objElemRect.top;
                effacerDessin();  dessiner();
			}

            function PermettreLeDepot(){
                event.preventDefault();
            }


      const dessiner = ()=> {
          objC2D.save();
          var strTexte = "UNION JACK";
        objC2D.font ="120pt fantasay";
        objC2D.baseline = "bottom";
        objC2D.textAlign = "center"; 
         intXSouris = objCanvas.width/2;
	     intYSouris = objCanvas.height/2;    
        var Texte = strTexte.split(' ');
        for(var i =0;i < Texte.length;i++){
            objC2D.fillText(Texte[i], intXTexte ,intYTexte +(i * 150));

        }


      

        objC2D.globalCompositeOperation = 'source-atop';
    /*FOND BLEU*/
        objC2D.beginPath();
       
        objC2D.moveTo(0,0);
        objC2D.lineTo(640,0)
        objC2D.lineTo(640,320)
        objC2D.lineTo(0,320)
        
        objC2D.fillStyle = 'blue'; 
        objC2D.fill();
        objC2D.closePath();
        /*X BLANC*/
        objC2D.beginPath();
        objC2D.moveTo(3,3);    
        objC2D.lineTo(640,320);
        objC2D.strokeStyle = 'white';
        objC2D.lineWidth = 60;
        objC2D.stroke();
        objC2D.closePath();
        objC2D.beginPath();
        objC2D.moveTo(0,320);    
        objC2D.lineTo(640,0);
        objC2D.strokeStyle = 'white';
        objC2D.lineWidth = 60;
        objC2D.stroke();
        objC2D.closePath();
        /*X ROUGE*/
        objC2D.beginPath();
        objC2D.moveTo(-5,9);  
        objC2D.lineTo(objCanvas.width/2-20,objCanvas.height/2);
        objC2D.strokeStyle = 'red';
        objC2D.lineWidth = 20;
        objC2D.stroke();
        objC2D.closePath();


        objC2D.beginPath();
        objC2D.moveTo(0,331);  
       objC2D.lineTo(objCanvas.width/2,objCanvas.height/2+10);
  
        objC2D.strokeStyle = 'red';
        objC2D.lineWidth = 20;
        objC2D.stroke();
        objC2D.closePath();


        objC2D.beginPath();
        objC2D.moveTo(644,311);  
       objC2D.lineTo(objCanvas.width/2,objCanvas.height/2-10);
    
        objC2D.strokeStyle = 'red';
        objC2D.lineWidth = 20;
        objC2D.stroke();
        objC2D.closePath();

        objC2D.beginPath();
        objC2D.moveTo(640,-12);  
       objC2D.lineTo(objCanvas.width/2,objCanvas.height/2-10);
 
        objC2D.strokeStyle = 'red';
        objC2D.lineWidth = 20;
        objC2D.stroke();
        objC2D.closePath();

        // + BLANC
        objC2D.beginPath();
        objC2D.moveTo(objCanvas.width/2,0);  
        objC2D.lineTo(objCanvas.width/2,objCanvas.height);
   
        objC2D.strokeStyle = 'white';
        objC2D.lineWidth = 100;
        objC2D.stroke();
        objC2D.closePath();
//
        objC2D.beginPath();
        objC2D.moveTo(0,objCanvas.height/2);  
        objC2D.lineTo(objCanvas.width,objCanvas.height/2);
   
        objC2D.strokeStyle = 'white';
        objC2D.lineWidth = 100;
        objC2D.stroke();
        objC2D.closePath();

    /*+ ROUGE*/
    objC2D.beginPath();
        objC2D.moveTo(objCanvas.width/2,0);  
        objC2D.lineTo(objCanvas.width/2,objCanvas.height);
   
        objC2D.strokeStyle = 'red';
        objC2D.lineWidth = 60;
        objC2D.stroke();
        objC2D.closePath();
//
        objC2D.beginPath();
        objC2D.moveTo(0,objCanvas.height/2);  
        objC2D.lineTo(objCanvas.width,objCanvas.height/2);
   
        objC2D.strokeStyle = 'red';
        objC2D.lineWidth = 60;
        objC2D.stroke();
        objC2D.closePath();
  //Bordure
  objC2D.beginPath();
        objC2D.moveTo(0,0);    
        objC2D.lineTo(640,1);
        objC2D.strokeStyle = 'black';
        objC2D.lineWidth = 1;
        objC2D.stroke();
        objC2D.closePath();

        objC2D.beginPath();
        objC2D.moveTo(0,0);    
        objC2D.lineTo(0,320);
        objC2D.strokeStyle = 'black';
        objC2D.lineWidth = 1;
        objC2D.stroke();
        objC2D.closePath();

        objC2D.beginPath();
        objC2D.moveTo(0,320);    
        objC2D.lineTo(640,320);
        objC2D.strokeStyle = 'black';
        objC2D.lineWidth = 1;
        objC2D.stroke();
        objC2D.closePath();

        objC2D.beginPath();
        objC2D.moveTo(640,320);    
        objC2D.lineTo(640,0);
        objC2D.strokeStyle = 'black';
        objC2D.lineWidth = 1;
        objC2D.stroke();
        objC2D.closePath();
        
        objC2D.restore();

	}

   

         
   </script>
</head>

<body onload="initDessiner()">
    <header class="sTexteCentre sLargeurDiv sEntete">
        <p> 
            <span class="sTitreApp">
                Drapeau de l'Angleterre<br />
            </span> par 
            <span class="sAuteurApp">
                Mohamed-Amine Djelloud
            </span> 
       </p>
    </header>

    <main class="sLargeurDiv sCorps">	
	   <canvas id="monCanvas" width="640" height="320" tabindex="1" draggable="true" ondragstart="prendreTexte();" ondrop="deposerTexte()" ondragover="glisserTexte()" ondragleave="deposerTexte()" ondragenter="deposerTexte()" >
		    Votre navigateur ne supporte pas la balise canvas
	    </canvas>
    </main>

    <footer class="sLargeurDiv sPiedDePage">
        <p>
            <a href="http://www.cgodin.qc.ca">
                <img src="logoCGG.jpg" alt="logoCGG" />
            </a> 
			<a href="http://www.cgodin.qc.ca/programme/techniques-informatique/">
	           Département d'informatique du Cégep Gérald-Godin
	        </a> 
            <br />
            &copy; 2020
        </p>
    </footer>
</body>
</html>